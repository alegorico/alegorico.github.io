<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using SQLite with PHP - Alegorico</title>
    <meta name="description" content="A minimalist blog focusing on technology, programming, and development insights.">
    <meta name="author" content="Alegorico">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Alegorico">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <nav class="site-nav">
                <a href="/" class="site-title">Alegorico</a>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/pages/about">About</a></li>
                    <li><a href="/pages/links">Links</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="site-content">
        <div class="container">
            <article class="post">
    <header class="post-header">
        <h1 class="post-title">Using SQLite with PHP</h1>
        <div class="post-meta">
            <time datetime="">
                
            </time>
            
            <div class="post-tags">
                
                <span class="tag">sqlite</span>
                
                <span class="tag">php</span>
                
            </div>
            
        </div>
    </header>
    
    <div class="post-content">
        <p>SQLite is a serverless, configuration-free and reliable database engine used on
everything from iPods to Mobile apps. It can also be used for small web
applications as well. With SQLite, you can get an application up and running
without worrying about a full blown MySQL or PostgreSQL server install…and
best of all it can be easily backed up or put into version control.</p>

<p>Here we are going to use SQLite with PHP using PHP’s built in <code class="language-plaintext highlighter-rouge">PDO</code> function.</p>

<p>Start off by moving to your project directory and then create a new SQLite
database in terminal:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite3 db.sqlite
</code></pre></div></div>

<p>SQLite will now open. Create a new database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE garage(
	id INTEGER PRIMARY KEY,
	year INT(4) NOT NULL,
	make VARCHAR(255) NOT NULL,
	model VARCHAR(255) NOT NULL
);
</code></pre></div></div>

<p>Now type <code class="language-plaintext highlighter-rouge">.schema</code> to verify you table is created. You should see the database
schema. Let’s insert some values into the database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INSERT INTO garage(year, make, model) VALUES
    (1991, 'Ferrari', 'Testarossa'),
	(1994, 'Acura', 'NSX'),
	(1992, 'Toyota', 'Corolla');
</code></pre></div></div>

<p>Finally, query the database to make sure all the values were inserted:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT * FROM garage;
</code></pre></div></div>

<p>Exit SQLite using the <code class="language-plaintext highlighter-rouge">.exit</code> command. You should now see the <code class="language-plaintext highlighter-rouge">db.sqlite</code> file
created in your current working directory.</p>

<h4 id="selecting-data-from-sqlite-in-php">Selecting data from SQLite in PHP</h4>

<p>Now we are going to select some data from the SQLite database using PHP’s built
in PDO function. Create a new PHP file and use this function to connect using
PDO:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// General database query
function dbQuery($sql)
{
	// set PDO for SQLite
	$db = new PDO("sqlite:db.sqlite");
	// set the params to query
	$params = ['year', 'make', 'model'];

	// query the database using the sql from the parameter
	foreach($db-&gt;query($sql) as $row)
	{
		// loop through the parameters given in the function
		// to only get those with the right key
		foreach($params as $param)
		{
			$objectParams[$param] = $row[$param];
		}
		// store the object params in an objects array
		$objects[] = $objectParams;
		// clear out the params array for next loop
		$objectParams = null;
	}
	$db = null;

	return $objects;
}
</code></pre></div></div>

<p>You can read through the comments of the function to see how it all works, but basically what happens
here is the function queries the database and loops through looking for the specified parameters.</p>

<p>Next, lets create a function that will get all the cars in the database. Just below the <code class="language-plaintext highlighter-rouge">dbQuery</code> function,
add this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function getAllCars()
{
	$sql = "SELECT * FROM garage";
	$cars = dbQuery($sql);
	return $cars;
}
</code></pre></div></div>

<p>Here we are calling our <code class="language-plaintext highlighter-rouge">dbQuery</code> function using the select all statement as our function parameter. Now
if we add this just below our <code class="language-plaintext highlighter-rouge">getAllCars</code> function and run the PHP file, the output should show all the
cars in the database:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$cars = getAllCars();
var_dump($cars);
</code></pre></div></div>

<p>We’ll add one more function in order to narrow down our search, a query by param function:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function getCarsByParam($param, $search=NULL)
{
	if($search)
	{
		$sql = "SELECT * FROM garage WHERE " . $param .  "  LIKE '%" . $search . "%'";
	}
	else
	{
		$sql = "SELECT * FROM garage WHERE " . $param";
	}
	$cars = dbQuery($sql);
	return $cars;
}
</code></pre></div></div>

<p>Here we will be searching the database for a term like the <code class="language-plaintext highlighter-rouge">$search</code> term and a param like the <code class="language-plaintext highlighter-rouge">$param</code>. Add this
below the <code class="language-plaintext highlighter-rouge">getCarsByParam</code> function to test it out:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$cars = getCarsByParam('year', '1991');
var_dump($cars);
</code></pre></div></div>

<p>That about wraps it up for a nice intro to using PHP with SQLite. Make sure to take a look at the <a href="http://codoki.github.io/links/">links</a> page
for further reading and resources.</p>

    </div>
    
    <nav class="post-nav">
        <div class="post-nav-links">
            
            
            <a href="/" class="home-link">Back to Home</a>
            
            
        </div>
    </nav>
</article>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2025 Alegorico. Minimal design, maximum impact.</p>
        </div>
    </footer>
</body>
</html>